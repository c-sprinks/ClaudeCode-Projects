<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LBOB - Lightning Brain On Board</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <style>
        /* Copy the first part of styles from original file */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Job Context Styles */
        .job-context {
            background: rgba(255, 107, 53, 0.1);
            border: 2px solid rgba(255, 107, 53, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 15px;
            display: block;
        }

        /* Conversation History Styles */
        .conversation-history {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            max-height: 300px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* Attachment Button Styles */
        .attachment-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid rgba(255, 107, 53, 0.5);
            background: rgba(255, 107, 53, 0.2);
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .attachment-btn:hover {
            background: rgba(255, 107, 53, 0.4);
            border-color: rgba(255, 107, 53, 0.8);
            transform: scale(1.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            min-height: 100vh;
            align-items: center;
        }

        .lbob-character {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .character-image {
            width: 350px;
            height: 350px;
            border-radius: 50%;
            border: 3px solid rgba(255, 107, 53, 0.6);
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
            background: radial-gradient(circle, rgba(255, 107, 53, 0.1) 0%, rgba(26, 26, 46, 0.8) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .chat-interface {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .chat-title {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #FF6B35;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .chat-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 107, 53, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 1rem;
            resize: vertical;
            min-height: 80px;
            margin-bottom: 10px;
        }

        .chat-input:focus {
            outline: none;
            border-color: rgba(255, 107, 53, 0.6);
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.2);
        }

        .send-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .send-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #F7931E 0%, #FF6B35 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        .send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect } = React;
        const { createElement: e } = React;

        function LBOBApp() {
            // Demo mode - bypass authentication
            const [isLoggedIn] = useState(true);
            const [message, setMessage] = useState('');
            const [showSpeechBubble, setShowSpeechBubble] = useState(false);
            const [speechText, setSpeechText] = useState('');
            const [loading, setLoading] = useState(false);

            // Job integration state
            const [messages, setMessages] = useState([
                { id: 1, sender: 'user', text: "I'm working at ABC Manufacturing building", timestamp: new Date() },
                { id: 2, sender: 'ai', text: "I can see you're working at ABC Manufacturing. I have access to the building's fire alarm system documentation and previous service records. What specific assistance do you need?", timestamp: new Date() }
            ]);
            const [currentJob, setCurrentJob] = useState({
                customerName: 'ABC Manufacturing',
                address: '123 Industrial Blvd, Manufacturing District',
                jobNumber: 'JOB-2024-001'
            });
            const [showHistory] = useState(true);

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            };

            const handleSendMessage = () => {
                if (!message.trim()) return;

                // Demo message handling
                const newMessage = {
                    id: Date.now(),
                    sender: 'user',
                    text: message.trim(),
                    timestamp: new Date()
                };
                setMessages(prev => [...prev, newMessage]);
                setMessage('');

                // Demo AI response
                setTimeout(() => {
                    const aiResponse = {
                        id: Date.now() + 1,
                        sender: 'ai',
                        text: "This is a demo response. In the full version, I would analyze your message and provide intelligent assistance based on the job context and equipment information.",
                        timestamp: new Date()
                    };
                    setMessages(prev => [...prev, aiResponse]);
                }, 1000);
            };

            const handleFileUpload = (e) => {
                alert('Demo: File upload functionality would work here with full backend connection');
            };

            const startVoiceRecording = () => {
                alert('Demo: Voice recording would work here with full backend connection');
            };

            if (!isLoggedIn) {
                return e('div', { className: 'container' }, 'Loading...');
            }

            return e('div', { className: 'container' },
                // LBOB Character
                e('div', { className: 'lbob-character' },
                    e('div', { className: 'character-image' },
                        e('div', {
                            style: {
                                fontSize: '120px',
                                color: '#FF6B35',
                                textAlign: 'center'
                            }
                        }, '🤖'),
                        e('div', {
                            style: {
                                position: 'absolute',
                                bottom: '20px',
                                fontSize: '24px',
                                fontWeight: 'bold',
                                color: '#FF6B35'
                            }
                        }, 'LBOB')
                    )
                ),

                // Chat Interface
                e('div', { className: 'chat-interface' },
                    // Job Context Header
                    currentJob && e('div', { className: 'job-context' },
                        e('h3', { style: { margin: '0 0 10px 0', color: '#FF6B35' } },
                            `Working on: ${currentJob.customerName}`
                        ),
                        e('p', { style: { margin: '5px 0', fontSize: '14px' } },
                            `📍 ${currentJob.address}`
                        ),
                        e('p', { style: { margin: '5px 0', fontSize: '14px' } },
                            `Job #: ${currentJob.jobNumber}`
                        )
                    ),

                    // Chat Title
                    e('div', { className: 'chat-title' }, 'Chat with LBOB'),

                    // Conversation History
                    showHistory && messages.length > 0 && e('div', { className: 'conversation-history' },
                        messages.map(msg =>
                            e('div', {
                                key: msg.id,
                                style: {
                                    marginBottom: '10px',
                                    padding: '8px 12px',
                                    borderRadius: '10px',
                                    backgroundColor: msg.sender === 'user' ? '#E3F2FD' : '#F5F5F5',
                                    color: '#333',
                                    alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',
                                    maxWidth: '80%'
                                }
                            },
                                e('div', { style: { fontSize: '12px', color: '#666', marginBottom: '3px' } },
                                    `${msg.sender === 'user' ? 'You' : 'LBOB'} - ${new Date(msg.timestamp).toLocaleTimeString()}`
                                ),
                                e('div', {}, msg.text)
                            )
                        )
                    ),

                    // Message Input Area
                    e('div', { style: { display: 'flex', flexDirection: 'column', gap: '10px' } },
                        // Attachment Buttons
                        e('div', { style: { display: 'flex', gap: '10px', justifyContent: 'center' } },
                            e('button', {
                                className: 'attachment-btn',
                                onClick: handleFileUpload,
                                title: 'Upload File'
                            }, '📁'),
                            e('button', {
                                className: 'attachment-btn',
                                onClick: handleFileUpload,
                                title: 'Take Photo'
                            }, '📷'),
                            e('button', {
                                className: 'attachment-btn',
                                onClick: startVoiceRecording,
                                title: 'Record Voice'
                            }, '🎤')
                        ),

                        // Message Input
                        e('textarea', {
                            className: 'chat-input',
                            placeholder: 'Ask LBOB about building safety, fire protection, or security systems...',
                            value: message,
                            onChange: (e) => setMessage(e.target.value),
                            onKeyPress: handleKeyPress,
                            rows: 3
                        }),

                        // Send Button
                        e('button', {
                            className: 'send-button',
                            onClick: handleSendMessage,
                            disabled: !message.trim()
                        }, 'Send to LBOB 🚀')
                    )
                )
            );
        }

        // Render the app
        ReactDOM.render(e(LBOBApp), document.getElementById('root'));
    </script>
</body>
</html>