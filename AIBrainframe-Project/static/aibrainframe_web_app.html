<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CertaSite - AI Building Safety Assistant</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        // Configure Babel for JSX transformation
        Babel.registerPlugin('@babel/plugin-transform-react-jsx', window.Babel.availablePlugins['transform-react-jsx']);
    </script>
    <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            overflow: hidden;
            cursor: none;
        }

        .custom-cursor {
            width: 20px;
            height: 20px;
            background: #FF6B35;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.1s ease;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }
        
        .app-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        .immersive-environment {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(255, 107, 53, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(245, 148, 79, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0f1419 0%, #1a1a2e 50%, #16213e 100%);
            overflow: hidden;
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 107, 53, 0.3);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) translateX(100px);
                opacity: 0;
            }
        }
        
        .lbob-character {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            z-index: 100;
            cursor: pointer;
        }

        .lbob-container {
            position: relative;
            width: 100%;
            height: 100%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .lbob-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 15px;
            position: relative;
            z-index: 3;
            transition: all 0.3s ease;
            filter: brightness(1.1) contrast(1.1) saturate(1.2);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(245, 148, 79, 0.1) 100%);
        }

        .lbob-glow {
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: radial-gradient(circle, rgba(255, 107, 53, 0.3) 0%, transparent 70%);
            border-radius: 20px;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lbob-shadow {
            position: absolute;
            bottom: -10px;
            left: 10%;
            right: 10%;
            height: 8px;
            background: radial-gradient(ellipse, rgba(0, 0, 0, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            z-index: 1;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        .lbob-character:hover .lbob-container {
            transform: translateY(-5px) scale(1.05);
        }

        .lbob-character:hover .lbob-glow {
            opacity: 1;
        }

        .lbob-character:hover .lbob-shadow {
            transform: scale(1.1);
        }

        /* 3D LBOB Canvas */
        .lbob-3d-canvas {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            overflow: hidden;
        }

        .lbob-3d-container {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 15px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* LBOB Animation Keyframes */
        @keyframes lbobIdle {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(1deg); }
        }

        @keyframes armWave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-15deg); }
            75% { transform: rotate(15deg); }
        }

        @keyframes headNod {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(3deg); }
        }

        @keyframes walkCycle {
            0% { transform: translateX(0px); }
            25% { transform: translateX(20px) scaleX(-1); }
            50% { transform: translateX(40px) scaleX(-1); }
            75% { transform: translateX(20px) scaleX(-1); }
            100% { transform: translateX(0px); }
        }

        .lbob-excited .lbob-container {
            animation: lbobBounce 0.6s ease-in-out infinite;
        }

        .lbob-happy .lbob-container {
            animation: lbobFloat 2s ease-in-out infinite;
        }

        .lbob-thinking .lbob-container {
            animation: lbobPulse 1.5s ease-in-out infinite;
        }

        .lbob-waving .lbob-container {
            animation: lbobWave 0.8s ease-in-out 3;
        }

        .lbob-walking .lbob-container {
            animation: lbobWalk 1s ease-in-out infinite;
        }

        @keyframes lbobBounce {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }

        @keyframes lbobFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(1deg); }
        }

        @keyframes lbobPulse {
            0%, 100% { transform: scale(1); filter: brightness(1.1); }
            50% { transform: scale(0.95); filter: brightness(0.9); }
        }

        @keyframes lbobWave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        @keyframes lbobWalk {
            0%, 100% { transform: translateX(0px) rotate(0deg); }
            25% { transform: translateX(3px) rotate(2deg); }
            75% { transform: translateX(-3px) rotate(-2deg); }
        }

        @keyframes bobFloat {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .speech-bubble {
            position: absolute;
            bottom: 100px;
            right: 20px;
            max-width: 200px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 107, 53, 0.3);
            z-index: 99;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .speech-bubble.show {
            opacity: 1;
            transform: translateY(0);
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -15px;
            right: 80px;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid rgba(255, 255, 255, 0.95);
        }

        .speech-bubble-content {
            color: #333;
            font-size: 16px;
            line-height: 1.4;
            margin: 0;
        }

        .speech-bubble-title {
            color: #FF6B35;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .chat-interface {
            position: absolute;
            bottom: 50px;
            left: 50px;
            width: 500px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 2px solid rgba(255, 107, 53, 0.3);
            padding: 20px;
            z-index: 90;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .chat-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 107, 53, 0.3);
            border-radius: 15px;
            padding: 15px;
            color: #fff;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: #FF6B35;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .action-buttons {
            position: absolute;
            top: 50px;
            right: 50px;
            display: flex;
            gap: 15px;
            z-index: 90;
        }

        .action-button {
            width: 60px;
            height: 60px;
            background: rgba(255, 107, 53, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 107, 53, 0.4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FF6B35;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            background: rgba(255, 107, 53, 0.4);
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.4);
        }

        .welcome-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 50;
            max-width: 600px;
        }

        .welcome-title {
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        .welcome-subtitle {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 30px;
        }

        @keyframes glow {
            from {
                filter: drop-shadow(0 0 10px rgba(255, 107, 53, 0.5));
            }
            to {
                filter: drop-shadow(0 0 20px rgba(255, 107, 53, 0.8));
            }
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .main-content {
            flex: 1;
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            gap: 0;
            overflow: hidden;
        }
        
        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            overflow-y: auto;
            border-right: 1px solid rgba(255, 107, 53, 0.1);
            position: relative;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FF6B35, #f5944f, #e67e22);
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 107, 53, 0.1);
        }

        .sidebar-welcome {
            color: #2c3e50;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .sidebar-subtitle {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .conversation-list {
            list-style: none;
        }
        
        .conversation-item {
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-left: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .conversation-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(to bottom, #FF6B35, #f5944f);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .conversation-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.15);
        }

        .conversation-item:hover::before {
            opacity: 1;
        }
        
        .conversation-item.active {
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        .new-conversation-btn {
            width: 100%;
            padding: 0.75rem;
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            margin-bottom: 1rem;
            transition: transform 0.2s ease;
        }
        
        .new-conversation-btn:hover {
            transform: scale(1.02);
        }
        
        .chat-area {
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            position: relative;
        }

        .chat-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FF6B35, #f5944f, #e67e22);
        }

        .chat-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 107, 53, 0.1);
            background: rgba(255, 255, 255, 0.95);
            position: relative;
        }

        .chat-header h2 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .chat-header p {
            color: #666;
            font-size: 0.95rem;
            margin: 0;
        }
        
        .chat-messages {
            flex: 1;
            padding: 1rem 2rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .message {
            display: flex;
            gap: 1rem;
            max-width: 80%;
        }
        
        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .message.ai {
            align-self: flex-start;
        }
        
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
        }
        
        .message.user .message-avatar {
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
        }

        .message.ai .message-avatar {
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
        }

        .lbob-character {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            position: relative;
            animation: pulse 2s infinite;
        }
        
        .lbob-character::before {
            content: '🤖';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            animation: bounce 1s infinite alternate;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
        }
        
        @keyframes bounce {
            from { transform: translate(-50%, -50%) scale(1); }
            to { transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .message-content {
            padding: 1rem 1.25rem;
            border-radius: 18px;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
            line-height: 1.6;
            font-size: 0.95rem;
            position: relative;
        }

        .message.user .message-content {
            background: linear-gradient(45deg, #FF6B35, #f5944f);
            color: white;
            box-shadow: 0 3px 12px rgba(255, 107, 53, 0.2);
        }

        .message.ai .message-content {
            background: white;
            border: 1px solid rgba(255, 107, 53, 0.1);
            box-shadow: 0 3px 12px rgba(255, 107, 53, 0.08);
        }

        .message.ai .message-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #FF6B35, #f5944f);
            border-radius: 18px 18px 0 0;
        }
        
        .chat-input-area {
            padding: 1.5rem 2rem;
            background: rgba(255, 255, 255, 0.95);
            border-top: 1px solid rgba(255, 107, 53, 0.1);
            backdrop-filter: blur(10px);
        }

        .lbob-panel {
            background: linear-gradient(135deg, #FF6B35 0%, #f5944f 50%, #e67e22 100%);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .lbob-character-container {
            position: relative;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .lbob-character-image {
            max-width: 100%;
            max-height: 100%;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .lbob-character-image:hover {
            transform: scale(1.05);
        }

        .lbob-info {
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            margin: 1rem;
            border-radius: 15px;
            text-align: center;
        }

        .lbob-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .lbob-title {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 1rem;
        }

        .lbob-status {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .upload-tools {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 107, 53, 0.1);
        }

        .upload-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .upload-btn {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.9);
            border: 2px dashed rgba(255, 107, 53, 0.3);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            color: #666;
        }

        .upload-btn:hover {
            border-color: #FF6B35;
            background: rgba(255, 107, 53, 0.1);
            transform: translateY(-2px);
        }

        .upload-btn-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .input-container {
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
        }
        
        .message-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            font-size: 1rem;
            resize: none;
            max-height: 120px;
            background: white;
            transition: border-color 0.2s ease;
        }
        
        .message-input:focus {
            outline: none;
            border-color: #FF6B35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .send-button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(45deg, #f5944f, #e67e22);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(245, 148, 79, 0.3);
        }
        
        .send-button:hover {
            transform: scale(1.05);
        }
        
        .send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-style: italic;
        }
        
        .typing-indicator {
            display: flex;
            gap: 3px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            background: #f5944f;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(10px);
            }
        }

        @keyframes formSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(245, 148, 79, 0.1));
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: modalFadeIn 0.4s ease-out;
        }

        .login-form {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 3rem;
            border-radius: 20px;
            box-shadow:
                0 25px 50px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(245, 148, 79, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            width: 450px;
            max-width: 90vw;
            border: 1px solid rgba(245, 148, 79, 0.2);
            animation: formSlideIn 0.5s ease-out 0.1s both;
            position: relative;
            overflow: hidden;
        }

        .login-form::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(245, 148, 79, 0.1), transparent);
            animation: shimmer 2s infinite;
        }

        .login-form::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(245, 148, 79, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(245, 148, 79, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: -1;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(245, 148, 79, 0.2);
            border-radius: 12px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
        }

        .form-input:focus {
            outline: none;
            border-color: #f5944f;
            background: rgba(255, 255, 255, 0.95);
            box-shadow:
                0 0 0 4px rgba(245, 148, 79, 0.1),
                0 8px 25px rgba(245, 148, 79, 0.15);
            transform: translateY(-2px);
        }
        
        .form-button {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, #f5944f 0%, #e67e22 50%, #d35400 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow:
                0 8px 25px rgba(245, 148, 79, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .form-button:hover {
            transform: translateY(-3px);
            box-shadow:
                0 15px 35px rgba(245, 148, 79, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .form-button:active {
            transform: translateY(-1px);
        }

        .form-button:disabled {
            opacity: 0.7;
            transform: none;
            cursor: not-allowed;
        }
        
        .error-message {
            color: #e53e3e;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .header {
                padding: 1rem;
            }
            
            .chat-messages {
                padding: 1rem;
            }
            
            .chat-input-area {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // API Configuration
        const API_BASE = 'http://localhost:8000';
        
        // Auth Service
        const authService = {
            login: async (username, password) => {
                const response = await fetch(`${API_BASE}/users/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ username, password })
                });
                
                if (!response.ok) throw new Error('Invalid credentials');
                
                const data = await response.json();
                localStorage.setItem('token', data.access_token);
                return data;
            },
            
            logout: () => {
                localStorage.removeItem('token');
            },
            
            getToken: () => localStorage.getItem('token'),
            
            isAuthenticated: () => !!localStorage.getItem('token')
        };
        
        // API Service
        const apiService = {
            request: async (endpoint, options = {}) => {
                const token = authService.getToken();
                const response = await fetch(`${API_BASE}${endpoint}`, {
                    ...options,
                    headers: {
                        'Content-Type': 'application/json',
                        ...(token && { Authorization: `Bearer ${token}` }),
                        ...options.headers,
                    },
                });
                
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return response.json();
            },
            
            getConversations: () => apiService.request('/conversations/'),
            
            createConversation: (title) => 
                apiService.request('/conversations/', {
                    method: 'POST',
                    body: JSON.stringify({ title })
                }),
            
            getMessages: (conversationId) => 
                apiService.request(`/conversations/${conversationId}/messages`),
            
            sendMessage: (conversationId, message) =>
                apiService.request(`/conversations/${conversationId}/messages`, {
                    method: 'POST',
                    body: JSON.stringify({ message_text: message })
                })
        };
        
        // Login Component
        function LoginModal({ onLogin }) {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [email, setEmail] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const [isSignUp, setIsSignUp] = useState(false);
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');

                try {
                    if (isSignUp) {
                        await authService.register(username, password, email);
                        setError('Account created successfully! Please login.');
                        setIsSignUp(false);
                    } else {
                        await authService.login(username, password);
                        onLogin();
                    }
                } catch (err) {
                    setError(isSignUp ? 'Failed to create account. Username may already exist.' : 'Invalid username or password');
                } finally {
                    setLoading(false);
                }
            };
            
            return (
                <div className="login-modal">
                    <form className="login-form" onSubmit={handleSubmit}>
                        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                            <div style={{
                                width: '60px',
                                height: '60px',
                                background: 'linear-gradient(135deg, #FF6B35, #f5944f)',
                                borderRadius: '15px',
                                margin: '0 auto 1rem',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                color: 'white',
                                fontSize: '24px',
                                fontWeight: 'bold',
                                boxShadow: '0 8px 25px rgba(255, 107, 53, 0.4)'
                            }}>
                                <svg width="40" height="40" viewBox="0 0 32 32" style={{fill: 'white'}}>
                                    <polygon points="16,4 28,12 28,20 16,28 4,20 4,12" />
                                    <polygon points="16,8 24,14 24,18 16,24 8,18 8,14" fill="rgba(255,255,255,0.8)" />
                                </svg>
                            </div>
                            <h2 style={{ color: '#2c3e50', fontWeight: '700', fontSize: '1.5rem' }}>
                                {isSignUp ? 'Join CertaSite' : 'CertaSite Access'}
                            </h2>
                            <p style={{ color: '#666', fontSize: '0.9rem', marginTop: '0.5rem' }}>
                                {isSignUp ? 'Meet LBOB, your AI safety assistant ready to help' : 'Meet LBOB, your AI Building Safety Assistant'}
                            </p>

                            <div style={{
                                marginTop: '1.5rem',
                                textAlign: 'center',
                                padding: '1rem',
                                background: 'rgba(255, 107, 53, 0.05)',
                                borderRadius: '12px',
                                border: '1px solid rgba(255, 107, 53, 0.1)'
                            }}>
                                <div style={{
                                    width: '80px',
                                    height: '80px',
                                    margin: '0 auto 1rem',
                                    borderRadius: '50%',
                                    overflow: 'hidden',
                                    border: '3px solid #FF6B35'
                                }}>
                                    <img
                                        src="LBOB3.png"
                                        alt="LBOB Preview"
                                        style={{
                                            width: '100%',
                                            height: '100%',
                                            objectFit: 'cover'
                                        }}
                                    />
                                </div>
                                <div style={{
                                    fontSize: '0.85rem',
                                    color: '#666',
                                    lineHeight: '1.4'
                                }}>
                                    <strong style={{ color: '#2c3e50' }}>LBOB is waiting inside!</strong><br />
                                    Your AI technician ready to solve building safety challenges with photos, videos & expert guidance.
                                </div>
                            </div>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Username</label>
                            <input
                                type="text"
                                className="form-input"
                                placeholder="Enter your username"
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                                required
                            />
                        </div>

                        {isSignUp && (
                            <div className="form-group">
                                <label className="form-label">Email</label>
                                <input
                                    type="email"
                                    className="form-input"
                                    placeholder="Enter your email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    required
                                />
                            </div>
                        )}

                        <div className="form-group">
                            <label className="form-label">Password</label>
                            <input
                                type="password"
                                className="form-input"
                                placeholder="Enter your password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                required
                            />
                        </div>

                        {error && <div className="error-message" style={{
                            background: error.includes('successfully') ? 'rgba(76, 175, 80, 0.1)' : 'rgba(229, 62, 62, 0.1)',
                            color: error.includes('successfully') ? '#4CAF50' : '#e53e3e',
                            padding: '0.75rem',
                            borderRadius: '8px',
                            fontSize: '0.875rem',
                            marginTop: '1rem'
                        }}>{error}</div>}

                        <button type="submit" className="form-button" disabled={loading}>
                            {loading ? (isSignUp ? 'Creating Account...' : 'Accessing...') : (isSignUp ? 'Create Account' : 'Access Platform')}
                        </button>

                        <div style={{ textAlign: 'center', marginTop: '1.5rem' }}>
                            <button
                                type="button"
                                onClick={() => {
                                    setIsSignUp(!isSignUp);
                                    setError('');
                                    setUsername('');
                                    setPassword('');
                                    setEmail('');
                                }}
                                style={{
                                    background: 'none',
                                    border: 'none',
                                    color: '#f5944f',
                                    cursor: 'pointer',
                                    fontSize: '0.9rem',
                                    textDecoration: 'underline'
                                }}
                            >
                                {isSignUp ? 'Already have an account? Login' : "Don't have an account? Sign up"}
                            </button>
                        </div>
                    </form>
                </div>
            );
        }
        
        // Message Component
        function Message({ message, isTyping }) {
            return (
                <div className={`message ${message.sender_type}`}>
                    <div className="message-avatar">
                        {message.sender_type === 'ai' ? (
                            <div className="lbob-character"></div>
                        ) : (
                            'U'
                        )}
                    </div>
                    <div className="message-content">
                        {isTyping ? (
                            <div className="loading">
                                <span>LBOB is thinking</span>
                                <div className="typing-indicator">
                                    <div className="typing-dot"></div>
                                    <div className="typing-dot"></div>
                                    <div className="typing-dot"></div>
                                </div>
                            </div>
                        ) : (
                            message.message_text
                        )}
                    </div>
                </div>
            );
        }
        
        // Immersive LBOB Experience Component
        function AIBrainFrameApp() {
            const [isAuthenticated, setIsAuthenticated] = useState(authService.isAuthenticated());
            const [currentConversation, setCurrentConversation] = useState(null);
            const [messages, setMessages] = useState([]);
            const [inputMessage, setInputMessage] = useState('');
            const [loading, setLoading] = useState(false);
            const [lbobSpeech, setLbobSpeech] = useState('');
            const [showSpeechBubble, setShowSpeechBubble] = useState(false);
            const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
            const [lbobMood, setLbobMood] = useState('happy');
            const [particles, setParticles] = useState([]);
            const canvasRef = useRef(null);
            const sceneRef = useRef(null);
            const modelRef = useRef(null);

            // Custom cursor tracking
            useEffect(() => {
                const handleMouseMove = (e) => {
                    setMousePosition({ x: e.clientX, y: e.clientY });
                };
                window.addEventListener('mousemove', handleMouseMove);
                return () => window.removeEventListener('mousemove', handleMouseMove);
            }, []);

            // Initialize floating particles
            useEffect(() => {
                const newParticles = [];
                for (let i = 0; i < 20; i++) {
                    newParticles.push({
                        id: i,
                        left: Math.random() * 100,
                        delay: Math.random() * 20
                    });
                }
                setParticles(newParticles);
            }, []);

            // Initialize LBOB (simplified for debugging)
            useEffect(() => {
                if (!canvasRef.current || !isAuthenticated) return;

                console.log('Initializing LBOB character...');

                // For now, always use 2D fallback to ensure interface works
                showFallbackImage();
                return;

                // 3D code temporarily disabled for debugging
                /*
                // Check if Three.js and GLTFLoader are available
                if (typeof THREE === 'undefined') {
                    console.warn('Three.js not loaded, falling back to 2D');
                    showFallbackImage();
                    return;
                }

                if (typeof THREE.GLTFLoader === 'undefined') {
                    console.warn('GLTFLoader not loaded, falling back to 2D');
                    showFallbackImage();
                    return;
                }
                */

                const canvas = canvasRef.current;
                const img = canvas.parentNode.querySelector('.lbob-image');

                try {
                    // Initialize Three.js scene
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer({
                        canvas,
                        alpha: true,
                        antialias: true
                    });

                    renderer.setSize(80, 80);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                    renderer.shadowMap.enabled = true;
                    renderer.shadowMap.type = THREE.PCFSoftShadowMap;

                    // Setup lighting
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                    scene.add(ambientLight);

                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                    directionalLight.position.set(5, 5, 5);
                    directionalLight.castShadow = true;
                    scene.add(directionalLight);

                    const orangeLight = new THREE.PointLight(0xFF6B35, 0.5, 100);
                    orangeLight.position.set(-3, 3, 3);
                    scene.add(orangeLight);

                    camera.position.set(0, 0, 3);

                    // Load 3D Model
                    const loader = new THREE.GLTFLoader();
                    loader.load(
                        '/static/images/model.glb',
                        (gltf) => {
                            console.log('3D LBOB model loaded successfully');
                            const model = gltf.scene;

                            // Scale and position model
                            model.scale.set(0.8, 0.8, 0.8);
                            model.position.set(0, -0.3, 0);

                            // Enable shadows
                            model.traverse((child) => {
                                if (child.isMesh) {
                                    child.castShadow = true;
                                    child.receiveShadow = true;
                                }
                            });

                            scene.add(model);
                            modelRef.current = model;

                            // Setup animations if available
                            if (gltf.animations && gltf.animations.length) {
                                const mixer = new THREE.AnimationMixer(model);
                                const action = mixer.clipAction(gltf.animations[0]);
                                action.play();
                                model.userData.mixer = mixer;
                            }

                            // Hide fallback image since 3D loaded
                            if (img) img.style.display = 'none';
                        },
                        (progress) => {
                            console.log('Loading 3D LBOB:', (progress.loaded / progress.total * 100) + '%');
                        },
                        (error) => {
                            console.error('Error loading 3D LBOB model:', error);
                            showFallbackImage();
                        }
                    );

                    sceneRef.current = { scene, camera, renderer };

                    // Animation loop
                    const clock = new THREE.Clock();
                    const animate = () => {
                        requestAnimationFrame(animate);
                        const deltaTime = clock.getDelta();

                        if (modelRef.current) {
                            // Gentle rotation
                            modelRef.current.rotation.y += 0.005;

                            // Mood-based animations
                            switch (lbobMood) {
                                case 'excited':
                                    modelRef.current.position.y = -0.3 + Math.sin(Date.now() * 0.01) * 0.1;
                                    break;
                                case 'waving':
                                    modelRef.current.rotation.z = Math.sin(Date.now() * 0.02) * 0.1;
                                    break;
                                case 'thinking':
                                    modelRef.current.rotation.x = Math.sin(Date.now() * 0.005) * 0.05;
                                    break;
                                default:
                                    modelRef.current.position.y = -0.3 + Math.sin(Date.now() * 0.003) * 0.03;
                            }

                            // Update animation mixer
                            if (modelRef.current.userData.mixer) {
                                modelRef.current.userData.mixer.update(deltaTime);
                            }
                        }

                        renderer.render(scene, camera);
                    };
                    animate();

                    return () => {
                        if (sceneRef.current) {
                            sceneRef.current.renderer.dispose();
                        }
                    };

                } catch (error) {
                    console.error('Three.js initialization failed:', error);
                    showFallbackImage();
                }
                */

                function showFallbackImage() {
                    const canvas = canvasRef.current;
                    const img = canvas.parentNode.querySelector('.lbob-image');
                    if (img) {
                        canvas.style.display = 'none';
                        img.style.display = 'block';
                        console.log('Using 2D LBOB fallback');
                    }
                }

            }, [isAuthenticated, lbobMood]);

            // LBOB greeting system
            useEffect(() => {
                if (isAuthenticated && !currentConversation) {
                    setTimeout(() => {
                        showLbobMessage("Hi there! I'm LBOB, your AI building safety assistant. I'm here to help you with fire protection, security systems, and any building safety challenges!");
                    }, 1000);

                    createNewConversation();
                }
            }, [isAuthenticated]);

            const showLbobMessage = (message) => {
                setLbobSpeech(message);
                setShowSpeechBubble(true);
                setTimeout(() => {
                    setShowSpeechBubble(false);
                }, 5000);
            };

            const createNewConversation = async () => {
                try {
                    const conversation = await apiService.createConversation('LBOB Safety Session');
                    setCurrentConversation(conversation);
                } catch (error) {
                    console.error('Failed to create conversation:', error);
                }
            };

            const sendMessage = async () => {
                if (!inputMessage.trim() || !currentConversation || loading) return;

                const userMessage = {
                    sender_type: 'user',
                    message_text: inputMessage,
                    timestamp: new Date().toISOString()
                };

                setMessages(prev => [...prev, userMessage]);
                setInputMessage('');
                setLoading(true);
                setLbobMood('thinking');

                // Show LBOB thinking
                showLbobMessage("Let me think about that...");

                try {
                    const response = await apiService.sendMessage(
                        currentConversation.conversation_id,
                        inputMessage
                    );

                    setMessages(prev => [...prev, response]);
                    setLbobMood('happy');

                    // Show LBOB response in speech bubble
                    setTimeout(() => {
                        showLbobMessage(response.message_text);
                    }, 500);

                } catch (error) {
                    console.error('Failed to send message:', error);
                    setLbobMood('confused');
                    showLbobMessage("Oops! I'm having trouble connecting. Let me try again!");
                } finally {
                    setLoading(false);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            };

            const handleLbobClick = () => {
                const interactions = [
                    { message: "Hi there! How can I help you stay safe today?", mood: 'waving' },
                    { message: "Ready to tackle some building safety challenges together?", mood: 'excited' },
                    { message: "I'm here to help! What's on your mind?", mood: 'thinking' },
                    { message: "Let's make your building safer! What do you need?", mood: 'excited' },
                    { message: "Building safety is my specialty! How can I assist?", mood: 'waving' },
                    { message: "Click anywhere on the screen and I'll walk over there!", mood: 'excited' }
                ];
                const randomInteraction = interactions[Math.floor(Math.random() * interactions.length)];
                showLbobMessage(randomInteraction.message);
                setLbobMood(randomInteraction.mood);

                // Reset mood after animation
                setTimeout(() => {
                    setLbobMood('happy');
                }, 3000);
            };

            // Make LBOB walk to clicked location
            const handleScreenClick = (e) => {
                if (e.target.closest('.lbob-character') || e.target.closest('.chat-interface')) {
                    return; // Don't move if clicking on LBOB or chat
                }

                const rect = e.currentTarget.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const clickY = e.clientY - rect.top;

                // Move LBOB towards click location
                const lbobElement = document.querySelector('.lbob-character');
                if (lbobElement) {
                    lbobElement.style.transition = 'all 2s ease-in-out';
                    lbobElement.style.left = `${clickX - 60}px`;
                    lbobElement.style.bottom = `${window.innerHeight - clickY - 70}px`;

                    setLbobMood('walking');
                    showLbobMessage("Coming over there!");

                    setTimeout(() => {
                        setLbobMood('happy');
                        showLbobMessage("Here I am! What do you need help with?");
                    }, 2000);
                }
            };

            const handleLogout = () => {
                authService.logout();
                setIsAuthenticated(false);
                setCurrentConversation(null);
                setMessages([]);
                showLbobMessage("See you later! Stay safe out there!");
            };
            
            if (!isAuthenticated) {
                return <LoginModal onLogin={() => setIsAuthenticated(true)} />;
            }
            
            return (
                <div className="app-container">
                    {/* Custom Cursor */}
                    <div
                        className="custom-cursor"
                        style={{
                            left: mousePosition.x - 10,
                            top: mousePosition.y - 10
                        }}
                    />

                    {/* Immersive Environment */}
                    <div className="immersive-environment" onClick={handleScreenClick}>
                        {/* Floating Particles */}
                        <div className="floating-particles">
                            {particles.map(particle => (
                                <div
                                    key={particle.id}
                                    className="particle"
                                    style={{
                                        left: `${particle.left}%`,
                                        animationDelay: `${particle.delay}s`
                                    }}
                                />
                            ))}
                        </div>

                        {/* Welcome Message */}
                        {!messages.length && (
                            <div className="welcome-message">
                                <h1 className="welcome-title">Welcome to LBOB's Workshop</h1>
                                <p className="welcome-subtitle">Your AI Building Safety Assistant is ready to help!</p>
                            </div>
                        )}

                        {/* 3D LBOB Character */}
                        <div
                            className={`lbob-character lbob-${lbobMood}`}
                            onClick={handleLbobClick}
                        >
                            <div className="lbob-3d-container">
                                <canvas
                                    ref={canvasRef}
                                    className="lbob-3d-canvas"
                                />
                                <img
                                    src="LBOB3.png"
                                    alt="LBOB - Your AI Safety Assistant"
                                    className="lbob-image"
                                    style={{ display: 'none' }}
                                />
                                <div className="lbob-glow"></div>
                                <div className="lbob-shadow"></div>
                            </div>
                        </div>

                        {/* LBOB Speech Bubble */}
                        <div className={`speech-bubble ${showSpeechBubble ? 'show' : ''}`}>
                            <div className="speech-bubble-title">LBOB says:</div>
                            <div className="speech-bubble-content">{lbobSpeech}</div>
                        </div>

                        {/* Chat Interface */}
                        <div className="chat-interface">
                            <div style={{
                                color: '#FF6B35',
                                fontWeight: 'bold',
                                marginBottom: '15px',
                                textAlign: 'center',
                                fontSize: '18px'
                            }}>
                                Chat with LBOB
                            </div>

                            <textarea
                                className="chat-input"
                                placeholder="Ask LBOB about building safety, fire protection, or security systems..."
                                value={inputMessage}
                                onChange={(e) => setInputMessage(e.target.value)}
                                onKeyPress={handleKeyPress}
                                disabled={loading || !currentConversation}
                                rows="3"
                            />

                            <button
                                onClick={sendMessage}
                                disabled={loading || !inputMessage.trim() || !currentConversation}
                                style={{
                                    width: '100%',
                                    marginTop: '10px',
                                    padding: '12px',
                                    background: loading ? 'rgba(255, 107, 53, 0.5)' : 'linear-gradient(45deg, #FF6B35, #f5944f)',
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '15px',
                                    fontSize: '16px',
                                    fontWeight: 'bold',
                                    cursor: loading ? 'not-allowed' : 'pointer',
                                    transition: 'all 0.3s ease'
                                }}
                            >
                                {loading ? 'LBOB is thinking...' : 'Send to LBOB 🚀'}
                            </button>
                        </div>

                        {/* Action Buttons */}
                        <div className="action-buttons">
                            <div className="action-button" title="Upload Photo">📷</div>
                            <div className="action-button" title="Record Voice">🎤</div>
                            <div className="action-button" title="Upload File">📁</div>
                            <div className="action-button" onClick={handleLogout} title="Logout">🚪</div>
                        </div>

                        {/* Previous Messages Display */}
                        {messages.length > 0 && (
                            <div style={{
                                position: 'absolute',
                                top: '50px',
                                left: '50px',
                                maxWidth: '400px',
                                maxHeight: '300px',
                                background: 'rgba(0, 0, 0, 0.8)',
                                backdropFilter: 'blur(20px)',
                                borderRadius: '20px',
                                padding: '20px',
                                overflowY: 'auto',
                                zIndex: 80,
                                border: '2px solid rgba(255, 107, 53, 0.3)'
                            }}>
                                <h4 style={{ color: '#FF6B35', marginBottom: '15px' }}>Chat History</h4>
                                {messages.slice(-5).map((message, index) => (
                                    <div key={index} style={{
                                        marginBottom: '10px',
                                        padding: '8px',
                                        background: message.sender_type === 'user'
                                            ? 'rgba(255, 107, 53, 0.2)'
                                            : 'rgba(255, 255, 255, 0.1)',
                                        borderRadius: '10px',
                                        fontSize: '14px'
                                    }}>
                                        <strong style={{ color: message.sender_type === 'user' ? '#FF6B35' : '#f5944f' }}>
                                            {message.sender_type === 'user' ? 'You: ' : 'LBOB: '}
                                        </strong>
                                        {message.message_text}
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        // Simple test component first
        function TestApp() {
            return React.createElement('div', { style: { padding: '20px', background: 'white', color: 'black' } },
                React.createElement('h1', null, 'LBOB Test Interface'),
                React.createElement('p', null, 'If you see this, React is working!'),
                React.createElement('button', {
                    onClick: () => console.log('Button clicked!'),
                    style: { padding: '10px', background: '#FF6B35', color: 'white', border: 'none', borderRadius: '5px' }
                }, 'Test Button')
            );
        }

        // Try to render test app first, then switch to main app
        try {
            console.log('Attempting to render React app...');
            console.log('React available:', typeof React !== 'undefined');
            console.log('ReactDOM available:', typeof ReactDOM !== 'undefined');

            const rootElement = document.getElementById('root');
            console.log('Root element found:', !!rootElement);

            // Render test app first
            ReactDOM.render(React.createElement(TestApp), rootElement);
            console.log('Test app rendered successfully');

            // After 3 seconds, switch to main app
            setTimeout(() => {
                console.log('Switching to main LBOB app...');
                ReactDOM.render(React.createElement(AIBrainFrameApp), rootElement);
            }, 3000);

        } catch (error) {
            console.error('React render failed:', error);
            document.getElementById('root').innerHTML = '<div style="padding: 20px; background: white; color: red;"><h1>Error Loading LBOB Interface</h1><p>' + error.message + '</p></div>';
        }
    </script>
</body>
</html>